<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>For Mayuri ðŸŒ™</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Sacramento&family=Poppins:wght@300;400&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --navy: #0a192f;
        --lavender-light: #e6e6fa;
        --lavender-mid: #967bb6;
        --accent: #b19cd9;
        --glass: rgba(255, 255, 255, 0.1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
        color: var(--lavender-light);
        height: 100vh;
        overflow: hidden;
        cursor: crosshair;
      }

      /* Background Stars */
      #canvas-stars {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 0;
        pointer-events: none;
      }

      .screen {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        text-align: center;
        z-index: 10;
        transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .hidden {
        opacity: 0;
        pointer-events: none;
        transform: translateY(20px);
      }

      /* ---------- LOADING ---------- */
      #loading h1 {
        font-family: "Playfair Display", serif;
        font-weight: 400;
        letter-spacing: 2px;
      }
      .moon {
        font-size: 4rem;
        filter: drop-shadow(0 0 15px var(--accent));
        animation: float 3s ease-in-out infinite;
      }

      /* ---------- GIFT UPGRADE ---------- */
      .gift-container {
        cursor: pointer;
        position: relative;
        transition: transform 0.3s ease;
      }
      .gift-container:hover {
        transform: scale(1.05);
      }
      .gift-box {
        width: 150px;
        height: 150px;
        background: var(--lavender-mid);
        position: relative;
        border-radius: 8px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      }
      .gift-lid {
        width: 170px;
        height: 40px;
        background: var(--accent);
        position: absolute;
        top: -20px;
        left: -10px;
        border-radius: 4px;
        z-index: 2;
        transition: 0.5s forwards;
      }
      .gift-container:active .gift-lid {
        transform: translateY(-50px) rotate(-10deg);
        opacity: 0;
      }
      .ribbon-v {
        position: absolute;
        width: 25px;
        height: 100%;
        background: var(--navy);
        left: 50%;
        transform: translateX(-50%);
      }

      /* ---------- MESSAGE UPGRADE ---------- */
      .message-box {
        max-width: 600px;
        background: var(--glass);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        padding: 40px;
        border-radius: 30px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        margin: 20px;
      }

      .photo-frame {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
      }
      .photo {
        width: 160px;
        height: 220px;
        border: 8px solid white;
        border-radius: 4px;
        background-size: cover;
        background-position: center;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        transition: 0.5s;
      }
      .photo:hover {
        transform: scale(1.1) rotate(0deg) !important;
        z-index: 100;
      }

      /* ---------- BUTTONS ---------- */
      .btn-glow {
        margin-top: 30px;
        padding: 15px 40px;
        border: none;
        border-radius: 50px;
        background: var(--lavender-mid);
        color: white;
        font-size: 1.1rem;
        font-family: "Poppins", sans-serif;
        cursor: pointer;
        box-shadow: 0 0 20px rgba(150, 123, 182, 0.4);
        transition: 0.3s;
      }
      .btn-glow:hover {
        background: var(--accent);
        box-shadow: 0 0 30px rgba(177, 156, 217, 0.7);
        transform: translateY(-2px);
      }

      .signature {
        font-family: "Sacramento", cursive;
        font-size: 4.5rem;
        background: linear-gradient(to right, #fff, var(--accent));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      /* Sparkle Effect */
      .sparkle {
        position: fixed;
        width: 4px;
        height: 4px;
        background: white;
        border-radius: 50%;
        pointer-events: none;
        animation: fly 1s linear forwards;
      }
      @keyframes fly {
        to {
          transform: translate(var(--mx), var(--my));
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <canvas id="canvas-stars"></canvas>

    <audio id="bgm" src="Theycallthislove.mpeg" loop></audio>

    <div id="loading" class="screen" onclick="startApp()">
      <div class="moon">âœ¨</div>
      <h1 style="margin-top: 20px">For my Moonlight...</h1>
      <p style="opacity: 0.7; margin-top: 10px">( Tap to enter )</p>
    </div>

    <div id="gift" class="screen hidden" style="display: none">
      <div class="gift-container" onclick="openGift()">
        <div class="gift-lid"></div>
        <div class="gift-box">
          <div class="ribbon-v"></div>
        </div>
      </div>
      <h2 style="margin-top: 40px; font-family: &quot;Playfair Display&quot;">
        A little something for Mayuri
      </h2>
    </div>

    <div id="message" class="screen hidden" style="display: none">
      <div class="photo-frame">
        <div
          class="photo"
          style="
            background-image: url(1000257856.jpg);
            transform: rotate(-5deg);
          "
        ></div>
        <div
          class="photo"
          style="background-image: url(1000257859.jpg); transform: rotate(5deg)"
        ></div>
      </div>
      <div class="message-box">
        <p id="typed-text" style="line-height: 1.8; font-style: italic"></p>
        <div
          id="arrow-btn"
          class="hidden"
          style="margin-top: 20px; cursor: pointer; font-size: 2rem"
          onclick="toValentine()"
        >
          âœ¨
        </div>
      </div>
    </div>

    <div id="valentine" class="screen hidden" style="display: none">
      <h1 style="font-family: &quot;Playfair Display&quot;; font-size: 2.5rem">
        Will you be my Valentine?
      </h1>
      <button class="btn-glow" onclick="celebrate()">Yes, Forever</button>
    </div>

    <div id="final" class="screen hidden" style="display: none">
      <div class="signature">Love Forevere</div>
      <p
        style="
          letter-spacing: 5px;
          text-transform: uppercase;
          font-size: 0.8rem;
          margin-top: 10px;
        "
      >
        Infinity and Beyond
      </p>
    </div>

    <script>
      const bgm = document.getElementById("bgm");
      const fullText =
        "I love you very, very much. You are my home, my peace, and my forever. Thank you for being with me through everything. I will always choose you. â€” Yours forever ðŸŒ™";

      // Initialize Stars
      const canvas = document.getElementById("canvas-stars");
      const ctx = canvas.getContext("2d");
      let stars = [];

      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.onresize = resize;
      resize();

      for (let i = 0; i < 150; i++) {
        stars.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.random() * 2,
          speed: Math.random() * 0.5,
        });
      }

      function animateStars() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "white";
        stars.forEach((s) => {
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
          ctx.fill();
          s.y += s.speed;
          if (s.y > canvas.height) s.y = 0;
        });
        requestAnimationFrame(animateStars);
      }
      animateStars();

      function startApp() {
        bgm.play();
        transition("loading", "gift");
      }

      function openGift() {
        transition("gift", "message");
        setTimeout(typeEffect, 1000);
      }

      function typeEffect() {
        let i = 0;
        const el = document.getElementById("typed-text");
        const timer = setInterval(() => {
          el.textContent += fullText[i];
          i++;
          if (i >= fullText.length) {
            clearInterval(timer);
            document.getElementById("arrow-btn").classList.remove("hidden");
          }
        }, 50);
      }

      function toValentine() {
        transition("message", "valentine");
      }

      function celebrate() {
        createExplosion();
        transition("valentine", "final");
      }

      function transition(outId, inId) {
        const outEl = document.getElementById(outId);
        const inEl = document.getElementById(inId);
        outEl.classList.add("hidden");
        setTimeout(() => {
          outEl.style.display = "none";
          inEl.style.display = "flex";
          setTimeout(() => inEl.classList.remove("hidden"), 50);
        }, 800);
      }

      function createExplosion() {
        for (let i = 0; i < 50; i++) {
          const p = document.createElement("div");
          p.className = "sparkle";
          p.style.left = "50%";
          p.style.top = "50%";
          p.style.setProperty("--mx", `${(Math.random() - 0.5) * 400}px`);
          p.style.setProperty("--my", `${(Math.random() - 0.5) * 400}px`);
          p.style.background = `hsl(${Math.random() * 50 + 250}, 70%, 80%)`;
          document.body.appendChild(p);
          setTimeout(() => p.remove(), 1000);
        }
      }

      // Mouse Sparkle
      window.addEventListener("mousemove", (e) => {
        const s = document.createElement("div");
        s.innerHTML = "âœ¨";
        s.style.position = "fixed";
        s.style.left = e.clientX + "px";
        s.style.top = e.clientY + "px";
        s.style.pointerEvents = "none";
        s.style.fontSize = "10px";
        s.style.color = "var(--accent)";
        document.body.appendChild(s);

        let transformY = 0;
        const fade = setInterval(() => {
          transformY -= 2;
          s.style.transform = `translateY(${transformY}px)`;
          s.style.opacity = s.style.opacity ? s.style.opacity - 0.05 : 1;
          if (s.style.opacity <= 0) {
            clearInterval(fade);
            s.remove();
          }
        }, 30);
      });
    </script>
  </body>
</html>
